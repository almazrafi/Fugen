os:
- linux
- osx

osx_image: xcode11
language: swift
dist: trusty

rvm: 2.6.3
gemfile: Gemfile

cache:
  - bundler
  - cocoapods

env:
  global:
    - LC_CTYPE=en_US.UTF-8
    - LANG=en_US.UTF-8
    - SKIP_SWIFT_LINT=TRUE
    - SWIFT_BUILD_VERSION=5
    - SWIFT_VERSION=5.1

install:
  - gem update bundler
  - bundle install --without=documentation
  - eval "$(curl -sL https://swiftenv.fuller.li/install.sh)"

script:
  - set -o pipefail

  - swift --version
  - swift test -Xswiftc -swift-version -Xswiftc $SWIFT_BUILD_VERSION

  - bundle exec pod lib lint --skip-tests --allow-warnings
  - bundle exec danger --remove-previous-comments

branches:
  only:
    - master
